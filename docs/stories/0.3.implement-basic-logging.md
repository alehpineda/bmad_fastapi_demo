# Story 0.3: Implement Basic Application Logging

## Status
Done

## Story
**As a** developer,
**I want** application errors to be logged to standard output,
**so that** I can easily diagnose issues when running the application inside a Docker container.

## Acceptance Criteria
1. The application is configured to use Python's built-in `logging` module.
2. A default logger is set up to output messages of level `INFO` and higher to `sys.stdout` or `sys.stderr`.
3. When an unhandled exception occurs anywhere in the application, the full traceback is captured and logged as an `ERROR`.
4. When running the application via Docker, any logged errors are visible in the output of the `docker logs` command.

## Tasks / Subtasks
*   **[x] Task 1: Configure Root Logger (AC: #1, #2)**
    *   [x] In `app/main.py`, import the `logging` module.
    *   [x] Use `logging.basicConfig()` to configure the root logger.
    *   [x] Set the `level` to `logging.INFO`.
    *   [x] Set the `format` to a clear, structured format (e.g., `%(asctime)s - %(name)s - %(levelname)s - %(message)s`).

*   **[x] Task 2: Implement Exception Handling Middleware (AC: #3)**
    *   [x] In `app/main.py`, create a custom middleware function or use a FastAPI `@app.exception_handler` for the generic `Exception` class.
    *   [x] Inside the handler, get a logger instance using `logging.getLogger(__name__)`.
    *   [x] Log the exception with `logger.exception("An unhandled exception occurred")`. Using `logger.exception` is important as it automatically includes the traceback information.
    *   [x] Return a generic `JSONResponse` with a `500 Internal Server Error` status code and a simple error message.

*   **[x] Task 3: Verify Docker Log Output (AC: #4)**
    *   [x] Create a temporary, deliberate error in one of the API endpoints for testing purposes (e.g., `raise ValueError("Test Exception")`).
    *   [x] Build the Docker image.
    *   [x] Run the Docker container.
    *   [x] Make a request to the endpoint that triggers the error.
    *   [x] Use the `docker logs <container_id>` command to inspect the container's output.
    *   [x] Confirm that the logged `ERROR` and its traceback are visible in the logs.
    *   [x] Remove the temporary error-raising code.

## Dev Notes
This story implements a non-functional requirement that was identified as a gap during the Product Owner's Master Validation review. The goal is to establish a basic, yet robust, logging foundation for the application. As a reference project, demonstrating best practices like proper logging is essential.

**Implementation Guidance:**
*   The logging configuration and exception handling middleware should be implemented in `app/main.py`, as this is the central entry point of the FastAPI application.
*   The standard Python `logging` module is sufficient for this task; no additional logging libraries are needed.
*   The key is to ensure that logs are directed to standard output (`stdout`/`stderr`) so they can be captured by container orchestration systems like Docker. Avoid logging to files.

### Testing
*   Testing this feature requires a specific, hands-on approach. The developer must manually introduce a temporary error into the code to simulate an unhandled exception.
*   The primary validation step is running `docker logs` on the container and confirming that the full error traceback is present in the output.
*   There is no requirement for automated tests for the logging configuration itself in this story. The focus is on manual verification of the end-to-end logging behavior.

## Change Log
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-08-25 | 1.0 | Configured basic logging and exception handling. | James (Developer) |
